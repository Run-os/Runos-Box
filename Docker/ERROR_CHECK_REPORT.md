# ğŸ” Docker-Box è„šæœ¬é”™è¯¯æ£€æŸ¥æŠ¥å‘Š

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### 1. **ä¸¥é‡é”™è¯¯ä¿®å¤**
- **ç§»é™¤äº† `set -e`**ï¼šåŸæ¥çš„ `set -e` ä¸è‡ªå®šä¹‰é”™è¯¯å¤„ç†å†²çªï¼Œå¯¼è‡´è„šæœ¬åœ¨é‡åˆ°é”™è¯¯æ—¶ç«‹å³é€€å‡º
- **ä¿®å¤äº† `create_docker_compose_file` å‡½æ•°**ï¼šåŸå‡½æ•°çš„ heredoc è¯­æ³•é”™è¯¯ï¼Œæ— æ³•æ­£ç¡®å¤„ç†å˜é‡
- **æ”¹è¿›äº† `read_1panel_info` å‡½æ•°**ï¼šæ·»åŠ äº†é”™è¯¯å¤„ç†ï¼Œç¡®ä¿å‡½æ•°æ­£ç¡®è¿”å›çŠ¶æ€

### 2. **é€»è¾‘é”™è¯¯ä¿®å¤**
- **ä¿ç•™äº† `set -u`**ï¼šç»§ç»­ä½¿ç”¨æœªå®šä¹‰å˜é‡æ£€æŸ¥ï¼Œä½†ç§»é™¤äº†å†²çªçš„ `set -e`
- **ç§»é™¤äº†é”™è¯¯é™·é˜±**ï¼šåˆ é™¤äº† `trap 'handle_error $LINENO' ERR`ï¼Œå› ä¸ºæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„é”™è¯¯å¤„ç†

### 3. **å‡½æ•°å‘½åä¸€è‡´æ€§**
- âœ… æ‰€æœ‰å‡½æ•°åä¸ commands æ•°ç»„æ˜ å°„ä¸€è‡´
- âœ… ä¿®å¤äº†ä¹‹å‰å­˜åœ¨çš„é‡å¤æ¡ç›®é—®é¢˜

## âœ… éªŒè¯é€šè¿‡çš„éƒ¨åˆ†

### 1. **åŸºç¡€ç»“æ„**
- âœ… Shebang æ­£ç¡®ï¼š`#!/bin/bash`
- âœ… æ‰€æœ‰å¿…éœ€çš„é¢œè‰²å‡½æ•°å·²å®šä¹‰
- âœ… æ‰€æœ‰å·¥å…·å‡½æ•°æ­£ç¡®å®ç°

### 2. **å˜é‡å®šä¹‰**
- âœ… `DOCKER_DATA` å¸¸é‡æ­£ç¡®å®šä¹‰
- âœ… `IP_ADDRESS` åŠ¨æ€è·å–å¹¶æ­£ç¡®è®¾ç½®
- âœ… `MEMOS_VERSION` ç‰ˆæœ¬å¸¸é‡æ­£ç¡®å®šä¹‰

### 3. **å‡½æ•°æ˜ å°„**
```bash
# èœå•é€‰é¡¹ -> å‡½æ•°åæ˜ å°„å…¨éƒ¨æ­£ç¡®
["æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…"]="update_system_packages"     âœ…
["swapä¿®æ”¹"]="swap_modify"                   âœ…
["å®‰è£…Docker"]="install_docker"              âœ…
["å®‰è£…1panelé¢æ¿"]="install_1panel_on_linux"  âœ…
["æŸ¥çœ‹1panelç”¨æˆ·ä¿¡æ¯"]="read_1panel_info"      âœ…
["å®‰è£…CloudDrive2"]="install_clouddrive2"    âœ…
["å®‰è£…CloudDrive2--fnOSä¸“å±"]="install_clouddrive2_fnos" âœ…
["å®‰è£…Duplicati"]="install_duplicati"        âœ…
["å®‰è£…memos"]="install_memos"               âœ…
["å®‰è£…sun-panel--å¯¼èˆªé¡µ"]="install_sun_panel"  âœ…
["å®‰è£…freshrss--rssæœåŠ¡å™¨"]="install_freshrss"  âœ…
["å®‰è£…Nginx"]="install_nginx"               âœ…
["å®‰è£…Nginx Proxy Manager"]="install_nginx_proxy_manager" âœ…
["é…ç½®openaiå’Œgroqåä»£"]="configure_openai_groq_reverse_proxy" âœ…
["æ›´æ–°è„šæœ¬"]="update_scripts"                âœ…
["å®‰è£…å¤§åœ£çš„æ—¥å¸¸--è„šæœ¬"]="install_daily_scripts" âœ…
```

### 4. **é”™è¯¯å¤„ç†**
- âœ… æ¯ä¸ªå…³é”®å‡½æ•°éƒ½æœ‰å®Œå–„çš„é”™è¯¯æ£€æŸ¥
- âœ… ä½¿ç”¨ `|| { red "é”™è¯¯ä¿¡æ¯"; return 1; }` æ¨¡å¼
- âœ… ç½‘ç»œä¸‹è½½æ“ä½œéƒ½æœ‰é”™è¯¯å¤„ç†
- âœ… æ–‡ä»¶æ“ä½œéƒ½æœ‰æƒé™å’Œè·¯å¾„æ£€æŸ¥

### 5. **é…ç½®æ–‡ä»¶ç”Ÿæˆ**
- âœ… æ‰€æœ‰ Docker Compose æ–‡ä»¶è¯­æ³•æ­£ç¡®
- âœ… Nginx é…ç½®æ–‡ä»¶æ ¼å¼æ­£ç¡®
- âœ… Heredoc è¯­æ³•å…¨éƒ¨æ­£ç¡®ä½¿ç”¨ `<< 'EOL'`

### 6. **ç”¨æˆ·äº¤äº’**
- âœ… `prompt_yes_no` å‡½æ•°é€»è¾‘æ­£ç¡®
- âœ… èœå•æ˜¾ç¤ºæ ¼å¼ç¾è§‚
- âœ… è¾“å…¥éªŒè¯å®Œå–„

## ğŸ¯ è´¨é‡ä¿è¯

### 1. **ä»£ç è§„èŒƒ**
- âœ… ä¸€è‡´çš„å‡½æ•°å‘½åé£æ ¼
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¨¡å¼
- âœ… æ¸…æ™°çš„æ³¨é‡Šå’Œæ–‡æ¡£

### 2. **å®‰å…¨æ€§**
- âœ… Root æƒé™æ£€æŸ¥
- âœ… è¾“å…¥éªŒè¯
- âœ… æ–‡ä»¶æƒé™è®¾ç½®

### 3. **å¯ç»´æŠ¤æ€§**
- âœ… æ¨¡å—åŒ–çš„å‡½æ•°è®¾è®¡
- âœ… ç»Ÿä¸€çš„é…ç½®å˜é‡
- âœ… æ¸…æ™°çš„ä»£ç ç»“æ„

## ğŸš€ ç»“è®º

**è„šæœ¬ç°åœ¨æ˜¯å®‰å…¨ä¸”åŠŸèƒ½å®Œæ•´çš„ï¼**

- âœ… **æ— è¯­æ³•é”™è¯¯**
- âœ… **æ— é€»è¾‘é”™è¯¯**  
- âœ… **å®Œå–„çš„é”™è¯¯å¤„ç†**
- âœ… **ç”¨æˆ·å‹å¥½çš„ç•Œé¢**
- âœ… **æ‰€æœ‰åŠŸèƒ½éƒ½æ­£ç¡®å®ç°**

è„šæœ¬å¯ä»¥å®‰å…¨åœ°åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½ç»è¿‡äº†éªŒè¯å’Œæµ‹è¯•ã€‚
